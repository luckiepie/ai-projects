<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta http-equiv="X-UA-Compatible" content="ie=edge"/>
  <title>Real-time Face Detection</title>

  <!-- libs -->
  <script defer src="face-api.min.js"></script>
  <script defer src="script.js"></script>

  <style>
    :root{
      --bg:#0b0b0c; --fg:#eaecef; --muted:#9aa4b2;
      --chip:#15171b; --chip-on:#1f6feb;
      --chip-bd:#2a2f37; --chip-bd-on:#3b82f6;
      --btn:#101217; --btn-bd:#2a2f37;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;background:#fff;color:#0b1220;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif}
    .wrap{min-height:100%;display:grid;place-items:center;padding:16px}
    .container{width:min(92vw,960px)}

    /* stage: video + canvas */
    .stage{position:relative;width:100%;aspect-ratio:4/3;max-height:86vh;border-radius:16px;overflow:hidden;background:#000;box-shadow:0 10px 30px rgba(0,0,0,.28)}
    .stage video,.stage canvas{position:absolute;inset:0;width:100%;height:100%;object-fit:cover;display:block}
    .stage video{z-index:1}
    .stage canvas{z-index:2;pointer-events:none}

    /* controls bar under video (iPhone-like: separate chips & buttons) */
    .controls{margin-top:12px;display:flex;flex-wrap:wrap;gap:10px;align-items:center}
    .group{display:flex;gap:8px;align-items:center}
    .spacer{flex:1}

    /* chip-style toggles using hidden checkbox + label */
    .chip-toggle{display:inline-flex;align-items:center}
    .chip-toggle input{display:none}
    .chip-toggle span{
      display:inline-flex;align-items:center;justify-content:center;
      padding:8px 12px;border-radius:9999px;
      background:var(--chip);color:var(--fg);
      border:1px solid var(--chip-bd);font-size:14px;line-height:1;
      user-select:none;cursor:pointer;
    }
    .chip-toggle input:checked + span{
      background:var(--chip-on);border-color:var(--chip-bd-on);
      box-shadow:0 0 0 2px rgba(59,130,246,.18) inset;
    }

    /* select kept for compatibility, styled compact */
    .select{
      background:#111319;color:#eaecef;border:1px solid var(--chip-bd);
      border-radius:12px;padding:8px 10px;font-size:14px;
    }

    /* buttons */
    .btn{
      background:var(--btn);color:#eaecef;border:1px solid var(--btn-bd);
      padding:10px 14px;border-radius:12px;font-size:14px;cursor:pointer;
    }
    .btn.primary{border-color:#3b82f6;background:#14223b}
    .btn:disabled{opacity:.5;cursor:not-allowed}

    /* tiny stats on the right */
    .stats{display:flex;gap:12px;align-items:center;color:#333;font-size:13px}
    .dot{width:8px;height:8px;border-radius:9999px;background:#ef4444}
    .dot.on{background:#22c55e}

    /* toast (top center) */
    .toast{
      position:fixed;left:50%;top:12px;transform:translateX(-50%);
      padding:10px 14px;background:rgba(15,17,21,.9);color:#eaecef;
      border:1px solid rgba(255,255,255,.12);border-radius:10px;font-size:14px;z-index:10
    }
    .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="container">
      <h1 class="sr-only">Real-time Face Detection</h1>

      <!-- video + overlay -->
      <div class="stage" id="stage">
        <video id="video" width="720" height="560" autoplay muted playsinline></video>
        <!-- canvas is injected by script.js -->
      </div>

      <!-- clean controls like iPhone: separate chips & buttons in a single bar -->
      <div class="controls" id="controls">
        <!-- toggles (chips) -->
        <div class="group">
          <label class="chip-toggle" for="toggleBoxes">
            <input id="toggleBoxes" type="checkbox" checked>
            <span>Box</span>
          </label>
          <label class="chip-toggle" for="toggleLandmarks">
            <input id="toggleLandmarks" type="checkbox" checked>
            <span>Landmarks</span>
          </label>
          <label class="chip-toggle" for="toggleExpr">
            <input id="toggleExpr" type="checkbox" checked>
            <span>Emotions</span>
          </label>
        </div>

        <!-- resolution (compact select to keep script.js compatibility) -->
        <div class="group">
          <select id="inputSize" class="select" aria-label="Ïó∞ÏÇ∞ Ìï¥ÏÉÅÎèÑ">
            <option value="320">320</option>
            <option value="416" selected>416</option>
            <option value="512">512</option>
          </select>
        </div>

        <div class="spacer"></div>

        <!-- action buttons -->
        <div class="group">
          <button id="btnPause"  class="btn">‚è∏Ô∏è Pause</button>
          <button id="btnResume" class="btn" disabled>‚ñ∂ Continue</button>
          <button id="btnCapture" class="btn primary">üì∏ Take Photo</button>
        </div>

        <!-- minimal stats -->
        <div class="group stats">
          <span><span id="liveDot" class="dot"></span></span>
          <span>FPS <b id="fps">0</b></span>
          <span>Faces <b id="faces">0</b></span>
        </div>
      </div>
    </div>
  </div>

  <!-- status -->
  <div id="toast" class="toast" hidden>Initializing models and camera‚Ä¶ Please allow access.</div>
</body>
</html>
